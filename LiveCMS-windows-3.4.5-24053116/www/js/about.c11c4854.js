webpackJsonp([14],{HuBl:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid no-padding box-cards"},[s("el-card",{staticClass:"box-card col-lg-6",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"col-md-12 no-padding"},[s("h3",[e._v("信令服务")])])]),e._v(" "),s("div",{staticClass:"server-info"},[s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa fa-support"}),e._v(" 版本信息")])]),e._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("硬件信息")]),e._v(" "),s("td",[s("span",[e._v(e._s(e.serverInfo.Hardware))])])]),e._v(" "),s("tr",[s("td",[e._v("接口版本")]),e._v(" "),s("td",[s("span",{attrs:{id:"interface-info"}},[e._v(e._s(e.serverInfo.InterfaceVersion))])])]),e._v(" "),s("tr",[s("td",[e._v("运行时间")]),e._v(" "),s("td",[s("span",{attrs:{id:"running-time-info"}},[e._v(e._s(e.runningTime||e.serverInfo.RunningTime)+"\r\n                                        "),e.userInfo?s("small",[e._v("\r\n                                             "),s("a",{staticClass:"text-orange",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.restart(t)}}},[e._v("重启")])]):e._e()])])]),e._v(" "),s("tr",[s("td",[e._v("软件信息")]),e._v(" "),s("td",[s("span",{attrs:{id:"software-info"}},[e._v(e._s("LiveGBS"===e.serverInfo.LogoText?e.serverInfo.Server:(e.serverInfo.Server||"").replace("LiveCMS","CMS")))])])])])])])]),e._v(" "),s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa",class:{"fa-key":!e.dongle,"fa-usb":e.dongle}}),e._v(" 授权信息 "),e.serverInfo.VersionType?s("span",[e._v("("+e._s(e.serverInfo.VersionType)+")")]):e._e(),e._v("\r\n                          \r\n                        "),e.canExpand?s("small",[s("a",{class:{fa:!0,"fa-plus":!e.expanded,"fa-chevron-down":e.expanded},staticStyle:{color:"#afa9a9"},attrs:{href:"#",title:e.expanded?"关闭激活码入口":"显示激活码入口"},on:{click:function(t){t.preventDefault(),e.toggleExpand(t)}}})]):e._e()])]),e._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("授权对象")]),e._v(" "),s("td",[e._v(e._s(e.serverInfo.Authorization))])]),e._v(" "),s("tr",[s("td",[e._v("授权时间")]),e._v(" "),e.actived?s("td",[e._v("永久授权")]):s("td",[!e.changed||e.serverInfo.RemainDays>0?s("span",[e._v("剩余期限"+e._s(e.serverInfo.RemainDays)+"天")]):e._e(),e._v(" "),e.changed?s("span",{staticStyle:{color:"red"}},[e._v("硬件信息变动 "+e._s(e.changed))]):e._e()])]),e._v(" "),(e.actived||e.expanded||e.serverInfo.RemainDays>30)&&e.serverInfo.ChannelCount>=0&&1e3!=e.serverInfo.ChannelCount?s("tr",[s("td",[e._v("通道数")]),e._v(" "),s("td",[e._v(e._s(e.serverInfo.ChannelCount))])]):e._e(),e._v(" "),!e.actived||e.expanded?s("tr",[s("td",[e._v("机器码")]),e._v(" "),s("td",[s("span",{attrs:{id:"key-info"}},[e._v("CMS"+e._s((e.serverInfo.Server||"").indexOf("Linux")>=0?"L":"W")+e._s(e.requestkey))]),e._v(" "),"LiveGBS"===e.serverInfo.LogoText?s("br"):e._e(),e._v(" "),"LiveGBS"===e.serverInfo.LogoText?s("span",{staticStyle:{color:"#bbb"}},[e._v("(通过邮箱：support@liveqing.com 向商务人员咨询永久授权信息)")]):e._e()])]):e._e(),e._v(" "),!e.actived||e.expanded?s("tr",[s("td",[e._v("提交激活码")]),e._v(" "),s("td",[s("el-input",{ref:"activationCode",staticStyle:{"margin-bottom":"10px"},attrs:{type:"textarea",rows:1,placeholder:"输入申请到的激活码",autosize:{minRows:1,maxRows:5}},model:{value:e.activationCode,callback:function(t){e.activationCode="string"==typeof t?t.trim():t},expression:"activationCode"}}),e._v(" "),s("div",[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.bSubmitting||!e.activationCode},on:{click:function(t){t.preventDefault(),e.checkCode(t)}}},[e._v(" 提交 ")])])],1)]):e._e()])])])])])]),e._v(" "),s("el-card",{staticClass:"box-card col-lg-6",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"col-md-6 no-padding"},[s("h3",[e._v("流媒体服务")])]),e._v(" "),e.sms.Load?s("div",{staticClass:"col-md-6 no-padding"},[s("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.smsserial,expression:"smsserial",modifiers:{trim:!0}}],staticStyle:{"margin-top":"23px",width:"100%"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.smsserial=t.target.multiple?s:s[0]},e.smschange]}},e._l(e.smss,function(t,a){return s("option",{key:a,domProps:{value:t.Serial}},[e._v(" SMS-"+e._s(t.Serial))])}))]):e._e()]),e._v(" "),s("div",{staticClass:"server-info"},[e.smsserverinfo.Hardware?e._e():s("h4",{staticStyle:{"text-align":"center"}},[e._v(" SMS 流媒体服务尚未启动 ")]),e._v(" "),e.smsserverinfo.Hardware?s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa fa-support"}),e._v(" 版本信息")])]),e._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("硬件信息")]),e._v(" "),s("td",[s("span",[e._v(e._s(e.smsserverinfo.Hardware))])])]),e._v(" "),s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("负载")]),e._v(" "),s("td",[e.sms.Load>0&&!e.isMobile()&&e.hasAnyRole(e.serverInfo,e.userInfo,"超级管理员")?s("span",[s("a",{staticClass:"text-primary",attrs:{role:"button"},on:{click:function(t){t.preventDefault(),e.$emit("show-session-list","",e.sms.Serial)}}},[e._v(e._s(e.sms.Load))])]):s("span",[e._v(e._s(e.sms.Load))])])]),e._v(" "),(e.sms.H264Decoder||e.sms.HevcDecoder)&&e.sms.HWDecodeLoad?s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("硬解负载")]),e._v(" "),s("td",[s("span",[e._v(e._s(e.sms.HWDecodeLoad))])])]):e._e(),e._v(" "),(e.sms.H264Encoder||e.sms.HevcEncoder)&&e.sms.HWEncodeLoad?s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("硬编负载")]),e._v(" "),s("td",[s("span",[e._v(e._s(e.sms.HWEncodeLoad))])])]):e._e(),e._v(" "),s("tr",[s("td",[e._v("运行时间")]),e._v(" "),s("td",[s("span",{attrs:{id:"running-time-info"}},[e._v(e._s(e.runningSMSTime||e.smsserverinfo.RunningTime)+"\r\n                                        "),e.userInfo?s("small",[e._v("\r\n                                             "),s("a",{staticClass:"text-orange",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.restartSMS(t)}}},[e._v("重启")])]):e._e()])])]),e._v(" "),s("tr",[s("td",[e._v("软件信息")]),e._v(" "),s("td",[s("span",{attrs:{id:"software-info"}},[e._v(e._s("LiveGBS"===e.serverInfo.LogoText?e.smsserverinfo.Server:(e.smsserverinfo.Server||"").replace("LiveSMS","SMS")))])])])])])])]):e._e(),e._v(" "),e.smsrequestkey.RequestKey&&e.smsserverinfo.Authorization?s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa",class:{"fa-key":!e.smsrequestkey.Dongle,"fa-usb":!!e.smsrequestkey.Dongle}}),e._v(" 授权信息 "),e.smsserverinfo.VersionType?s("span",[e._v("("+e._s(e.smsserverinfo.VersionType)+")")]):e._e()])]),e._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[e._v("授权对象")]),e._v(" "),s("td",[e._v(e._s(e.smsserverinfo.Authorization))])]),e._v(" "),s("tr",[s("td",[e._v("授权时间")]),e._v(" "),e.activedsms?s("td",[e._v("永久授权")]):s("td",[!e.smsrequestkey.Changed||e.smsserverinfo.RemainDays>0?s("span",[e._v("剩余期限"+e._s(e.smsserverinfo.RemainDays)+"天")]):e._e(),e._v(" "),e.smsrequestkey.Changed?s("span",{staticStyle:{color:"red"}},[e._v("硬件信息变动 "+e._s(e.smsrequestkey.Changed))]):e._e()])]),e._v(" "),(e.activedsms||e.expanded)&&e.smsserverinfo.ChannelCount&&e.smsserverinfo.ChannelCount>=0&&1e3!=e.smsserverinfo.ChannelCount?s("tr",[s("td",[e._v("通道数")]),e._v(" "),s("td",[e._v(e._s(e.smsserverinfo.ChannelCount))])]):e._e(),e._v(" "),!e.activedsms||e.expanded?s("tr",[s("td",[e._v("机器码")]),e._v(" "),s("td",[s("span",{attrs:{id:"key-info"}},[e._v("SMS"+e._s((e.smsserverinfo.Server||"").indexOf("Linux")>=0?"L":"W")+e._s(e.smsrequestkey.RequestKey))]),e._v(" "),"LiveGBS"===e.serverInfo.LogoText?s("br"):e._e(),e._v(" "),"LiveGBS"===e.serverInfo.LogoText?s("span",{staticStyle:{color:"#bbb"}},[e._v("(通过邮箱：support@liveqing.com 向商务人员咨询永久授权信息)")]):e._e()])]):e._e(),e._v(" "),!e.activedsms||e.expanded?s("tr",[s("td",[e._v("提交激活码")]),e._v(" "),s("td",[s("el-input",{ref:"activationCodeSMS",staticStyle:{"margin-bottom":"10px"},attrs:{type:"textarea",rows:1,placeholder:"输入申请到的激活码",autosize:{minRows:1,maxRows:5}},model:{value:e.activationCodeSMS,callback:function(t){e.activationCodeSMS="string"==typeof t?t.trim():t},expression:"activationCodeSMS"}}),e._v(" "),s("div",[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.bSubmittingSMS||!e.activationCodeSMS},on:{click:function(t){t.preventDefault(),e.checkCodeSMS(t)}}},[e._v(" 提交 ")])])],1)]):e._e()])])])]):e._e()])])],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},LxcY:function(e,t,s){t=e.exports=s("FZ+f")(!1),t.push([e.i,".container-fluid.no-padding.box-cards[data-v-560fda2a]{overflow:hidden}.container-fluid.no-padding.box-cards .box-card[class*=col-][data-v-560fda2a]{margin-bottom:-99999px;padding-bottom:99999px}",""])},OjLt:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},n=s("NYxO"),i=s("PJh5"),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={data:function(){return{timer:0,requestkey:"",activationCode:"",activationCodeSMS:"",bSubmitting:!1,bSubmittingSMS:!1,runningTime:"",runningSMSTime:"",smsserial:"",smss:[],sms:{},smsrequestkey:{},smsserverinfo:{},expanded:!1,dongle:!1,changed:""}},computed:a({},(0,n.mapState)(["userInfo","serverInfo"]),{actived:function(){return 9999==this.serverInfo.RemainDays},activedsms:function(){return 9999==this.smsserverinfo.RemainDays},canExpand:function(){return!!(this.actived&&this.serverInfo.VersionType&&this.serverInfo.VersionType.indexOf("旗舰版")<0)||!!(this.actived&&this.serverInfo.ChannelCount&&this.serverInfo.ChannelCount>=0&&1e3!=this.serverInfo.ChannelCount)}}),mounted:function(){var t=this;"yes"===this.$getQueryString("expand","")&&(this.expanded=!0),this.timer=setInterval(function(){if(t.serverInfo&&t.serverInfo.StartUpTime){var e=(0,r.default)(t.serverInfo.StartUpTime,"YYYY-MM-DD HH:mm:ss"),s=(0,r.default)(),a=r.default.duration(s.diff(e));t.serverInfo.DiffDuration&&(a=a.add(t.serverInfo.DiffDuration)),t.runningTime=parseInt(a.asDays())+" Days "+a.hours()+" Hours "+a.minutes()+" Mins "+a.seconds()+" Secs"}if(t.smsserverinfo&&t.smsserverinfo.StartUpTime){var e=(0,r.default)(t.smsserverinfo.StartUpTime,"YYYY-MM-DD HH:mm:ss"),s=(0,r.default)(),a=r.default.duration(s.diff(e));t.smsserverinfo.DiffDuration&&(a=a.add(t.smsserverinfo.DiffDuration)),t.runningSMSTime=parseInt(a.asDays())+" Days "+a.hours()+" Hours "+a.minutes()+" Mins "+a.seconds()+" Secs"}},1e3),e.get("/api/v1/getrequestkey").then(function(e){t.requestkey=e.RequestKey,t.dongle=!!e.Dongle,t.changed=e.Changed||""}),this.getSMSList()},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},beforeRouteEnter:function(e,t,s){s(function(t){"yes"===e.query.expand&&(t.expanded=!0)})},methods:a({},(0,n.mapActions)(["getServerInfo"]),{restart:function(){var t=this;this.$confirm("此操作将重启信令服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.get("/api/v1/restart").then(function(e){t.$message({type:"success",message:"重启成功!"}),setTimeout(function(){t.getServerInfo()},2e3)}).fail(function(){t.$message({type:"error",message:"重启失败!"})})}).catch(function(){})},restartSMS:function(){var t=this;this.$confirm("此操作将重启流媒体服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.get("/api/v1/sms/restart",{serial:t.smsserial}).then(function(e){t.$message({type:"success",message:"重启成功!"}),setTimeout(function(){t.getSMSInfo()},2e3)}).fail(function(){t.$message({type:"error",message:"重启失败!"})})}).catch(function(){})},checkCode:function(){var t=this;""==this.activationCode?this.$message({type:"error",message:"请输入激活码"}):(this.bSubmitting=!0,e.get("/api/v1/verifyproductcode",{productcode:this.activationCode}).then(function(e){1==e.State?(t.$message({type:"success",message:"授权成功！"}),t.getServerInfo()):t.$message({type:"error",message:"输入有效激活码"})}).always(function(){t.activationCode="",t.bSubmitting=!1}))},getSMSList:function(){var t=this;""==this.smsserial&&e.get("/api/v1/sms/list").then(function(e){t.smss=e,e.length>0&&(t.sms=e[0],t.smsserial=e[0].Serial),t.getSMSInfo()})},getSMSInfo:function(){var t=this;""!=this.smsserial&&(e.get("/api/v1/sms/getrequestkey",{serial:this.smsserial}).then(function(e){t.smsrequestkey=e}),e.get("/api/v1/sms/getserverinfo",{serial:this.smsserial}).then(function(e){t.smsserverinfo=e}))},smschange:function(){var t=this;this.getSMSInfo(),e.get("/api/v1/sms/list").then(function(e){t.smss=e;for(var s=0;s<t.smss.length;s++)if(t.smss[s].Serial==t.smsserial){t.sms=t.smss[s];break}})},checkCodeSMS:function(){var t=this;""==this.activationCodeSMS?this.$message({type:"error",message:"请输入激活码"}):(this.bSubmittingSMS=!0,e.get("/api/v1/sms/verifyproductcode",{serial:this.smsserial,productcode:this.activationCodeSMS}).then(function(e){1==e.State?(t.$message({type:"success",message:"授权成功！"}),t.getSMSInfo()):t.$message({type:"error",message:"输入有效激活码"})}).always(function(){t.activationCodeSMS="",t.bSubmittingSMS=!1}))},toggleExpand:function(){this.expanded=!this.expanded}})}}).call(t,s("0iPh"))},Uf0O:function(e,t,s){var a=s("LxcY");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("b83146aa",a,!0,{})},sZXX:function(e,t,s){"use strict";function a(e){s("Uf0O")}Object.defineProperty(t,"__esModule",{value:!0});var n=s("OjLt"),i=s.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(e){s.d(t,e,function(){return n[e]})}(r);var o=s("HuBl"),v=s("VU/8"),d=a,c=v(i.a,o.a,!1,d,"data-v-560fda2a",null);t.default=c.exports}});