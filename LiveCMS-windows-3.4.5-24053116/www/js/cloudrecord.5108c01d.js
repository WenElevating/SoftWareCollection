webpackJsonp([1],{"+1iT":function(t,e,a){"use strict";function i(t){a("lNNb")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("BdSM"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("hTLv"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-047692ab",null);e.default=u.exports},"//kK":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["modal",{fade:t.fade}],attrs:{"data-keyboard":"true","data-backdrop":"static",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),a("h4",{staticClass:"modal-title text-primary text-center"},[a("span",[t._v(t._s(t.videoTitle))])])]),t._v(" "),a("div",{staticClass:"modal-body"},[t.bShow?a("LivePlayer",{directives:[{name:"loading",rawName:"v-loading",value:t.bLoading,expression:"bLoading"}],attrs:{videoUrl:t.videoUrl,waterMark:t.osd,snapUrl:t.snapUrl,live:t.live,hideBigPlayButton:!!t.serverInfo.HideBigPlayButton,loading:t.bLoading,"element-loading-text":"加载中...","element-loading-background":"#000"},on:{media_info:t.onMediaInfo,error:t.onError,message:t.$message,"update:loading":function(e){t.bLoading=e}}}):t._e(),t._v(" "),t.isDemoUser(t.serverInfo,t.userInfo)&&!t.bOutHevcTip?a("div",{staticClass:"text-center"},[a("br"),t._v("\n                        提示: 演示系统限制匿名登录播放时间, 若需测试长时间播放, 请"),a("a",{attrs:{target:"_blank",href:"//www.liveqing.com/docs/download/LiveGBS.html"}},[t._v("下载使用")])]):t._e(),t._v(" "),t.bOutHevcTip?a("div",{staticClass:"text-center text-red"},[a("br"),t._v("\n                        提示: 正在播放 H265 直出流, 确保浏览器版本较新, 并且开启硬件加速\n                    ")]):t._e()],1),t._v(" "),t._m(1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])}],o={render:i,staticRenderFns:n};e.a=o},"/PfP":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FormDlg",{ref:"dlg",attrs:{title:"编辑录像计划",disabled:t.errors.any(),size:"modal-lgg",tabindex:""},on:{hide:t.onHide,show:t.onShow,submit:t.onSubmit}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.ID,expression:"form.ID",modifiers:{trim:!0}}],attrs:{type:"hidden",name:"ID"},domProps:{value:t.form.ID},on:{input:function(e){e.target.composing||t.$set(t.form,"ID",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{class:{"form-group":!0,"has-error":t.errors.has("Name")}},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[t._v("名称\r\n                "),a("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.Name,expression:"form.Name",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"Name","data-vv-as":"名称"},domProps:{value:t.form.Name},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||t.$set(t.form,"Name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),a("div",{class:{"form-group":!0,"has-error":t.errors.has("Enable")}},[a("label",{staticClass:"col-sm-2 control-label"},[t._v("状态\r\n            ")]),t._v(" "),a("div",{staticClass:"col-sm-9 checkbox"},[a("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"Enable"},model:{value:t.form.Enable,callback:function(e){t.$set(t.form,"Enable","string"==typeof e?e.trim():e)},expression:"form.Enable"}},[t._v("\r\n                    启用  \r\n                ")])],1)]),t._v(" "),a("div",{class:{"form-group":!0}},[a("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[t._v("录像计划详情\r\n                ")]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("CloudRecordPlan",{ref:"recordPlan"})],1)])]),t._v(" "),a("div",{staticClass:"clearfix"})])},n=[],o={render:i,staticRenderFns:n};e.a=o},"05st":function(t,e,a){var i=a("0zD4");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("4e85c726",i,!0,{})},"0tm0":function(t,e,a){"use strict";function i(t){a("mfN/")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("BiBB"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("7d1v"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,null,null);e.default=u.exports},"0zD4":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".plans[data-v-a298d878]{font-size:12px;text-align:center;border:0;width:800px;float:left;background-color:#f7f7f7;padding:15px 50px 25px 20px}.plan-week[data-v-a298d878]{width:10%;height:100%;float:left;background-color:#f7f7f7;color:#646363;line-height:88px;border:0}.plan-week[data-v-a298d878]:hover{background-color:#fff}.plan-hours[data-v-a298d878]{width:90%;height:100%;float:left;background-color:#f7f7f7}.plan-title-num[data-v-a298d878]{font-weight:700;height:25%!important;color:#7f7e7e;background-color:#f7f7f7;line-height:20px!important;width:4.166%;float:left;font-size:12px;border-color:#eee;border-style:none;text-align:right}.plan-title-num-right[data-v-a298d878]{margin-left:2px;margin-right:-2px}.plan-title-num-left[data-v-a298d878]{text-align:left!important;margin-left:-10px;padding-left:5px;margin-right:10px}.plan-title-line[data-v-a298d878]{font-weight:700;height:15%!important;color:#ddd;background-color:#f7f7f7;line-height:14px!important;width:4.167%;float:left;font-size:12px;border-style:none;text-align:right}.plan-title-line-left[data-v-a298d878]{border-style:none none none solid!important;border-color:#ddd;border-left-width:1px;margin-left:-.4%}.plan-day[data-v-a298d878]{width:100%;height:60%;float:left;background-color:#fff;color:#eee;line-height:40px;border:solid;border-width:1px;border-color:#ddd;margin-left:-.5%}.plan-header[data-v-a298d878]{font-weight:700;height:24px!important;color:#646363;background-color:#f7f7f7!important;line-height:24px!important}.plan-header[data-v-a298d878]:hover{background-color:#fff!important}.plan-row-header[data-v-a298d878]{height:24px;width:100%}.plan-row[data-v-a298d878]{height:60px;width:100%;border-top:1px;border-style:none;border-color:#eee}.plan-duration[data-v-a298d878]{display:block;height:100%;background-color:#567;border-color:#000;border-style:none;font-size:10px;cursor:pointer;float:left;position:relative}.plan-duration[data-v-a298d878]:hover{background-color:#6a7f95}",""])},"1Now":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box box-primary ids"},[t._m(0),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[t.hasAnyRole(t.serverInfo,t.userInfo,"超级管理员")?a("div",{staticClass:"form-group form-group-sm"},[a("div",{staticClass:"input-group input-group-sm"},[a("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:"/cloudrecord/plans/1"}},[a("i",{staticClass:"fa fa-calendar"}),t._v(" 录像计划\r\n                    ")])],1)]):t._e(),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"超级管理员")?a("span",{staticClass:"hidden-xs"},[t._v("  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[t._v("搜索")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"clearfix"}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.pageData,stripe:"","default-sort":{prop:"serial",order:"ascending"},"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{"min-width":"200",label:"设备国标编号",prop:"serial","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200",label:"通道国标编号",prop:"code","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"160",label:"操作",fixed:!t.isMobile()&&"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-group btn-group-xs"},[a("router-link",{staticClass:"btn btn-info",attrs:{to:"/cloudrecord/timeview/"+e.row.serial+"/"+e.row.code}},[a("i",{staticClass:"fa fa-file-video-o"}),t._v(" 查看录像\r\n                        ")]),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?a("a",{staticClass:"btn btn-danger",attrs:{role:"button"},on:{click:function(a){a.preventDefault(),t.remove(e.row)}}},[a("i",{staticClass:"fa fa-remove"}),t._v(" 删除\r\n                        ")]):t._e()],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"160",label:"通道名称",prop:"name",formatter:t.formatName,"show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100",label:"快照"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{"open-delay":1e3,"close-delay":10,placement:"left",title:e.row.code,width:"400",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{onerror:'this.src="/images/default_snap.png";',src:e.row.snap_url}}),t._v(" "),a("img",{staticStyle:{height:"30px",width:"50px"},attrs:{slot:"reference",onerror:'this.src="/images/default_snap.png";',src:e.row.snap_url},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间","min-width":"160",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"160",sortable:"custom"}})],1)],1),t._v(" "),t.total>0?a("div",{staticClass:"box-footer clearfix"},[a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.page},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.page=e}}})],1):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-header"},[a("h4",{staticClass:"text-primary text-center"},[t._v("云端录像通道列表")])])}],o={render:i,staticRenderFns:n};e.a=o},"21+a":function(t,e,a){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=a("M4fF"),r=i(o),s=a("5gxX"),l=i(s),d=a("KZtG"),u=i(d),c=a("NL8R"),f=i(c),h=a("NYxO");e.default={props:{},data:function(){return{q:"",online:"",total:0,pageSize:10,currentPage:1,sort:"Name",order:"asc",loading:!1,timer:0,cloudRecords:[],cloudRecordChannelListDlgTitle:"选择通道"}},computed:n({},(0,h.mapState)(["userInfo","serverInfo"])),components:{UploadDlg:l.default,CloudRecordPlanEditDlg:u.default,CloudRecordPlanChannelListDlg:f.default},mounted:function(){},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},methods:{ready:function(){var t=this;this.$watch("q",function(t,e){this.doDelaySearch()}),this.$watch("online",function(t,e){this.doSearch(t)}),this.$watch("currentPage",function(t,e){this.doSearch(t)}),this.timer=setInterval(function(){t.getCloudRecordPlans(!1)},3e3)},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={};this.q&&(e.q=this.q),this.online&&(e.online=this.online),this.$router.replace({path:"/cloudrecord/plans/"+t,query:e})},doDelaySearch:r.default.debounce(function(){this.doSearch()},800),getCloudRecordPlans:function(){var e=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a&&(this.loading=!0),t.ajax({method:"GET",url:"/api/v1/cloudrecord/plan/list",global:a,data:{q:this.q,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,sort:this.sort,order:this.order}}).then(function(t){e.total=t.PlanCount,e.cloudRecords=t.PlanList}).always(function(){a&&e.$nextTick(function(){e.loading=!1})})},sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getCloudRecordPlans()},formatName:function(t,e,a){return a||"-"},formatPlan:function(t,e,a){for(var i="",n=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],o=0;o<7;o++)a&&a.indexOf("s"+(o+1))>=0?i+=n[o]+"[✓] ":i+=n[o]+"[✗] ";return i},editCloudRecordPlan:function(t){this.$refs.cloudRecordEditDlg.show(t)},editChannel:function(t){this.cloudRecordChannelListDlgTitle="录像计划关联通道("+(t.Name||t.ID)+")",this.$refs.cloudRecordChannelListDlg.show(t.ID)},pushChannel:function(e){var a=this;if(!e.Online)return void this.$message({type:"error",message:"平台不在线!"});t.get("/api/v1/cloudRecord/pushcatalog",{id:e.ID}).then(function(){a.$message({type:"success",message:"推送通道信息成功"})})},removeCloudRecordPlan:function(e){var a=this;this.$confirm("确认删除 "+(e.Name||e.ID),"提示").then(function(){t.get("/api/v1/cloudrecord/plan/remove",{ID:e.ID}).always(function(){a.getCloudRecordPlans()})}).catch(function(){})},download:function(){window.open("/api/v1/cloudrecord/plan/export")},uploaded:function(){this.$message({type:"success",message:"上传成功！"}),this.getCloudRecordPlans(),this.$refs.uploadDlg.hide()},toggleEnable:function(e){t.get("/api/v1/cloudrecord/plan/setenable",{ID:e.ID,Enable:!e.Enable}).then(function(){e.Enable=!e.Enable})}},beforeRouteEnter:function(t,e,a){a(function(e){e.q=t.query.q||"",e.online=t.query.online||"",e.currentPage=parseInt(t.params.page)||1,e.ready()})},beforeRouteUpdate:function(t,e,a){var i=this;a(),this.$nextTick(function(){i.q=t.query.q||"",i.online=t.query.online||"",i.currentPage=parseInt(t.params.page)||1,i.cloudRecords=[],i.total=0,i.getCloudRecordPlans()})}}}).call(e,a("0iPh"))},"23ZA":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};a("F8S1");var n=a("eAMf"),o=function(t){return t&&t.__esModule?t:{default:t}}(n),r=a("NYxO");e.default={data:function(){return{videoUrl:"",videoTitle:"",osd:"",snapUrl:"",mediaInfo:null,bShow:!1,bLoading:!1,bOutHevcTip:!1}},props:{live:{type:Boolean,default:!1},fade:{type:Boolean,default:!1}},mounted:function(){var e=this;t(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),t(this.$el).on("hide.bs.modal",function(){e.reset(),e.$nextTick(function(){e.bShow=!1})}).on("show.bs.modal",function(){e.bShow=!0})},components:{LivePlayer:o.default},computed:i({},(0,r.mapState)(["userInfo","serverInfo"])),methods:{reset:function(){this.videoUrl="",this.videoTitle="",this.osd="",this.snapUrl="",this.mediaInfo=null,this.bLoading=!1,this.bOutHevcTip=!1},play:function(e,a,i,n){this.videoUrl=e||"",this.videoTitle=a||"",this.snapUrl=i||"",this.osd=n||"",t(this.$el).modal("show")},onMediaInfo:function(t){this.mediaInfo=t},onError:function(t){if("MediaError"==t&&(!this.live||this.mediaInfo&&String(this.mediaInfo.videoCodec).startsWith("hvc")))return this.bOutHevcTip=!0,void console.log("提示: 正在播放 H265 直出流, 确保浏览器版本较新, 并且开启硬件加速")}}}}).call(e,a("0iPh"))},4460:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box box-primary"},[t._m(0),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group"},["no"!=t.$getQueryString("menu")?a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[a("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\n            ")]):t._e()]),t._v(" "),a("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("div",{staticClass:"input-group input-group-sm"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$refs.cloudRecordEditDlg.show()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" 添加录像计划\n              ")])])]),t._v(" "),a("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[t._v("搜索")]),t._v(" "),!t.isMobile()&&t.hasAnyRole(t.serverInfo,t.userInfo,"超级管理员")?a("div",{staticClass:"input-group input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导出录像计划列表"},on:{click:function(e){e.preventDefault(),t.download(e)}}},[a("i",{staticClass:"fa fa-download"})]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"导入录像计划列表"},on:{click:function(e){e.preventDefault(),t.$refs.uploadDlg.show()}}},[a("i",{staticClass:"fa fa-upload"})])])]):a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"clearfix"}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.cloudRecords,stripe:"","default-sort":{prop:"CreatedAt",order:"descending"},"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"Name",label:"名称","min-width":"150","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"220",fixed:!t.isMobile()&&"right","class-name":"opt-group"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-group btn-group-xs"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),t.editCloudRecordPlan(e.row)}}},[a("i",{staticClass:"fa fa-edit"}),t._v(" 编辑\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),t.editChannel(e.row)}}},[a("i",{staticClass:"fa fa-check"}),t._v(" 关联通道\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),t.removeCloudRecordPlan(e.row)}}},[a("i",{staticClass:"fa fa-remove"}),t._v(" 删除\n                    ")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Enable",label:"是否启用","min-width":"100",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{value:e.row.Enable},on:{change:function(a){t.toggleEnable(e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Plan",label:"录像计划详情","min-width":"470",formatter:t.formatPlan,"show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdatedAt",label:"更新时间","min-width":"160",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreatedAt",label:"创建时间","min-width":"160",sortable:"custom"}})],1)],1),t._v(" "),t.total>0?a("div",{staticClass:"box-footer"},[a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}})],1):t._e()]),t._v(" "),a("UploadDlg",{ref:"uploadDlg",attrs:{title:"上传录像计划列表",url:"/api/v1/cloudrecord/plan/import"},on:{uploaded:t.uploaded}}),t._v(" "),a("CloudRecordPlanEditDlg",{ref:"cloudRecordEditDlg",on:{submit:function(e){t.getCloudRecordPlans()}}}),t._v(" "),a("CloudRecordPlanChannelListDlg",{ref:"cloudRecordChannelListDlg",attrs:{title:t.cloudRecordChannelListDlgTitle}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-header"},[a("h4",{staticClass:"text-primary text-center"},[t._v("录像计划列表")])])}],o={render:i,staticRenderFns:n};e.a=o},"4LM/":function(t,e,a){"use strict";(function(t){function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function i(n,o){try{var r=e[n](o),s=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=a("NYxO"),r=a("M4fF"),s=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{pageSize:10,q:"",page:1,pageData:[],total:0,sort:"",order:"",loading:!1}},mounted:function(){},computed:n({},(0,o.mapState)(["serverInfo","userInfo"])),methods:{ready:function(){this.$watch("q",function(){this.doDelaySearch()}),this.$watch("page",function(t){this.doSearch(t)})},load:function(){var e=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a&&(this.loading=!0),t.ajax({method:"GET",url:"/api/v1/cloudrecord/querychannels",global:a,data:{start:(this.page-1)*this.pageSize,limit:this.pageSize,q:this.q,sort:this.sort,order:this.order}}).then(function(t){e.pageData=t.rows,e.total=t.total}).always(function(){a&&e.$nextTick(function(){e.loading=!1})})},sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.load()},selectDevice:function(t){this.$emit("select-device",t)},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={};this.q&&(e.q=this.q),this.$router.replace({path:"/cloudrecord/"+t,query:e})},doDelaySearch:s.default.debounce(function(){this.doSearch()},800),formatName:function(t,e,a){var i=t.device_custom_name||t.device_name||"",n=t.custom_name||t.name||"";return i&&i!=n&&(n=n?n+"@"+i:i),n||"-"},remove:function(e){var a=this;return i(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:a.$confirm("删除 "+(e.custom_name||e.name)+" ,会将该通道所有录像删除，确认继续?","提示").then(function(){t.get("/api/v1/cloudrecord/removechannel",{serial:e.serial,code:e.code}).always(function(){a.load()})}).catch(function(){});case 1:case"end":return i.stop()}},i,a)}))()}},beforeRouteEnter:function(t,e,a){a(function(e){e.q=t.query.q||"",e.page=parseInt(t.params.page)||1,e.ready()})},beforeRouteUpdate:function(t,e,a){var i=this;a(),this.$nextTick(function(){i.q=t.query.q||"",i.page=parseInt(t.params.page)||1,i.pageData=[],i.total=0,i.load()})}}}).call(e,a("0iPh"))},"5XEf":function(t,e,a){var i=a("Lfx6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("7b0ae868",i,!0,{})},"5gxX":function(t,e,a){"use strict";function i(t){a("LbQQ")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("qb8i"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("lGU5"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,null,null);e.default=u.exports},"7d1v":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{attrs:{type:"text",placeholder:"选择日期"}})},n=[],o={render:i,staticRenderFns:n};e.a=o},B92P:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","overflow-x":"auto","overflow-y":"hidden"}},[a("span",{staticStyle:{color:"lightgrey","font-style":"italic","line-height":"24px"}},[t._v("录像计划 配置云端录像开启时段")]),t._v(" "),a("div",{staticClass:"plans"},[a("div",{staticClass:"plan-row-header"},[a("div",{staticClass:"plan-week plan-header",staticStyle:{cursor:"pointer"},on:{click:function(e){e.preventDefault(),t.refresh()}}},[a("i",{staticClass:"fa fa-refresh",attrs:{title:"点击还原"}}),t._v(" 重置")]),t._v(" "),a("div",{staticClass:"plan-week plan-header",staticStyle:{cursor:"pointer"},on:{click:function(e){e.preventDefault(),t.selectall()}}},[a("i",{staticClass:"fa fa-check",attrs:{title:"点击全选"}}),t._v(" 全选")]),t._v(" "),a("div",{staticClass:"plan-week plan-header",staticStyle:{cursor:"pointer"},on:{click:function(e){e.preventDefault(),t.unselectall()}}},[a("i",{staticClass:"fa fa-close",attrs:{title:"点击清空"}}),t._v(" 清空")])]),t._v(" "),t._l(t.days,function(e,i){return a("div",{key:i,staticClass:"plan-row",attrs:{index:i}},[a("div",{staticClass:"plan-week"},[t._v("星期"+t._s(e))]),t._v(" "),a("div",{staticClass:"plan-hours"},[t._l(24,function(e){return a("div",{key:e,class:{"plan-title-num":!0,"plan-title-num-left":e<=1,"plan-title-num-right":e>=10}},[t._v(t._s(e%2==0||1==e?1==e?0:e:""))])}),t._v(" "),t._l(24,function(e){return a("div",{key:e,class:{"plan-title-line":!0,"plan-title-line-left":e<=1}},[t._v("|")])}),t._v(" "),a("div",{staticClass:"plan-day",attrs:{index:i},on:{mousedown:function(e){e.preventDefault(),t.dayClick(e)}}},t._l(t.durations[i]||[],function(e,n){return a("span",{key:n},[a("el-popover",{attrs:{placement:"top",title:"录像时间段",width:"250",trigger:"click"}},[a("div",{staticStyle:{width:"224px",margin:"auto"}},[a("el-input",{staticStyle:{width:"46px"},attrs:{size:"mini",placeholder:"时",min:"0",max:"23"},model:{value:t.dstarthh,callback:function(e){t.dstarthh=e},expression:"dstarthh"}}),t._v(" :\r\n                                "),a("el-input",{staticStyle:{width:"46px"},attrs:{size:"mini",placeholder:"分",min:"0",max:"59"},model:{value:t.dstartmm,callback:function(e){t.dstartmm=e},expression:"dstartmm"}}),t._v(" -\r\n                                "),a("el-input",{staticStyle:{width:"46px"},attrs:{size:"mini",placeholder:"时",min:"0",max:"23"},model:{value:t.dendhh,callback:function(e){t.dendhh=e},expression:"dendhh"}}),t._v(" :\r\n                                "),a("el-input",{staticStyle:{width:"46px"},attrs:{size:"mini",placeholder:"分",min:"0",max:"59"},model:{value:t.dendmm,callback:function(e){t.dendmm=e},expression:"dendmm"}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.removeDuration(i,n)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.saveDuration(i,n)}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"plan-duration",style:"width:"+t.durationWidth(e,i)+"%;left:"+t.durationLeft(e,i,n)+"%;",attrs:{slot:"reference",id:"duration"+i+n,dayindex:i,durationindex:n,start:e["s"+(i+1)],end:e["e"+(i+1)]},on:{mousemove:function(e){e.preventDefault(),t.durationmove(e,i,n)},mousedown:function(a){a.preventDefault(),t.durationClick(a,e,i)}},slot:"reference"})])],1)}))],2)])})],2)])},n=[],o={render:i,staticRenderFns:n};e.a=o},BHkh:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".modal-title[data-v-3725ee4b]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}",""])},BKf4:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"time-rule"},[a("div",{ref:"day",staticClass:"time-day",style:{left:t.timeDayX+"px"}},[t._l(1440/t.minutesPerUnit,function(e){return a("div",{key:e,class:["time-minute",t.minuteActiveClass((e-1)*t.minutesPerUnit)],style:{width:t.minutesPerUnit+"px"},attrs:{title:t.minuteTitle((e-1)*t.minutesPerUnit)},on:{click:function(a){a.preventDefault(),t.clickMinute((e-1)*t.minutesPerUnit)}}})}),t._v(" "),t._l(24,function(e){return a("div",{key:e,class:[1==e?"time-text-first":"time-text"]},[t._v(t._s(t.hourText(e-1)))])})],2),t._v(" "),a("div",{ref:"cursor",staticClass:"time-cursor",style:{left:t.timeCursorX+"px"}},[a("div",{staticClass:"time-cursor-text"},[t._v(t._s(t.timeCursorText))])])])},n=[],o={render:i,staticRenderFns:n};e.a=o},BdSM:function(t,e,a){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=a("PJh5"),r=i(o),s=a("0tm0"),l=i(s),d=a("TFIr"),u=i(d),c=a("S4Bz"),f=i(c),h=a("eAMf"),m=i(h),v=a("NYxO");e.default={props:{serial:"",code:"",day:""},data:function(){return{videos:[],videoUrl:"",currentTime:0,bActive:!1,loading:!1,loadingRecords:!1,name:"",osd:"",mediaInfo:null,bOutHevcTip:!1,bDownloading:!1,bShared:!1}},components:{CloudRecordDatePicker:l.default,LivePlayer:m.default,CloudRecordTimeRule:u.default,TimeRangeDlg:f.default},methods:{updateDay:function(t){this.$router.replace("/cloudrecord/timeview/"+this.serial+"/"+this.code+"/"+t)},showCloudRecordDatePicker:function(){t(this.$refs.datePicker.$el).focus()},updateVideos:function(){var e=this;this.loadingRecords=!0,t.get("/api/v1/cloudrecord/querydaily",{serial:this.serial,code:this.code,period:this.day}).then(function(t){e.bShared=!!t.shared,e.name=t.name||e.serial+":"+e.code,e.osd=t.osd||"",e.videos=t.list}).always(function(){e.$nextTick(function(){e.loadingRecords=!1})})},onTimeChange:function(t){this.videoUrl=(t||{}).hls||"",this.currentTime=(t||{}).currentTime||0,this.bOutHevcTip=!1},onMediaInfo:function(t){this.mediaInfo=t},onVideoError:function(t){if("MediaError"==t)return this.bOutHevcTip=!0,void console.log("提示: 正在播放 H265 直出流, 确保浏览器版本较新, 并且开启硬件加速")},onVideoEnd:function(){this.mediaInfo=null;var t=this.videoUrls.indexOf(this.videoUrl);if(t>=0&&t<this.videos.length-1){var e=this.videos[t+1];if(!e)return;var a=(0,r.default)(e.startAt,"YYYYMMDDHHmmss"),i=a.diff(a.clone().startOf("day"),"minutes");this.$refs.timeRule.clickMinute(i)}},onVideoTimeUpdate:function(t){if(!(t<1)){var e=this.videoUrls.indexOf(this.videoUrl);if(e>=0&&e<this.videos.length){var a=this.videos[e],i=(0,r.default)(a.startAt,"YYYYMMDDHHmmss");i.add(t,"seconds");var n=i.diff(i.clone().startOf("day"),"minutes");this.$refs.timeRule.clickMinute(n,!1)}}},showTimeRangeDlg:function(){var t=(0,r.default)().second(0).subtract(30,"minutes"),e=(0,r.default)().second(0);t.isSame(e,"day")||(t=e.clone().startOf("day"));var a=this.$refs.timeRangeDlg;a.setDefault([t.toDate(),e.toDate()]),a.show()},onTimeRangeChange:function(e){var a=this;if(e&&2==e.length){var i=""+this.day+e[0],n=""+this.day+e[1],o=(0,r.default)(i,"YYYYMMDDHHmmss"),s=(0,r.default)(n,"YYYYMMDDHHmmss");if(o.isBefore(s)){for(var l=!1,d=o.clone();d.isSameOrBefore(s);d=d.add(1,"minute")){var u=d.unix();u-=u%(60*(this.serverInfo.MinutesPerUnit||5));var c=r.default.unix(u).format("HH:mm");if(this.$refs.timeRule.activeMinutes[c]){l=!0;break}}if(!l)return void this.$message({type:"error",message:o.format("HH:mm:ss")+" - "+s.format("HH:mm:ss")+" 没有录像"});this.$refs.timeRangeDlg.hide(),this.bDownloading=!0;var f="/api/v1/cloudrecord/video/download/"+this.serial+"/"+this.code+"/"+i+"/"+n+"/video.mp4";return void t.get(f).then(function(t){window.location.href=t}).always(function(){a.bDownloading=!1})}}this.$message({type:"error",message:"无效的时间段"})}},computed:n({},(0,v.mapState)(["userInfo","serverInfo"]),{shareURL:function(){return this.bShared||!this.serverInfo.APIAuth||this.serverInfo.DemoUser?"/playback.html?type=cloud&serial="+this.serial+"&code="+this.code+"&day="+this.day:""},videoUrls:function(){return this.videos.map(function(t,e,a){return(t||{}).hls})}}),mounted:function(){var t=(0,r.default)(),e=t.diff(t.clone().startOf("day"),"minutes");return e-=10,e<0&&(e=0),this.$refs.timeRule.clickMinute(e),this.serial&&this.code?this.day?void this.updateVideos():void this.$router.replace("/cloudrecord/timeview/"+this.serial+"/"+this.code+"/"+(0,r.default)().format("YYYYMMDD")):void this.$router.replace("/cloudrecord")},beforeRouteUpdate:function(t,e,a){var i=this;return t.params.serial&&t.params.code?t.params.day?(a(),void this.$nextTick(function(){i.loadingRecords||e.path==t.path||i.updateVideos()})):void a({path:"/cloudrecord/timeview/"+t.params.serial+"/"+t.params.code+"/"+(0,r.default)().format("YYYYMMDD"),replace:!0}):void a({path:"/cloudrecord",replace:!0})}}}).call(e,a("0iPh"))},BiBB:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=a("PJh5"),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){return{flags:{},defaultFlags:"0000000000000000000000000000000"}},props:{serial:{default:""},code:{default:""},token:{default:""},day:{default:function(){return(0,n.default)().format("YYYYMMDD")}}},mounted:function(){var e=this;t(this.$el).datepicker({language:"zh-CN",autoclose:!0,format:"yyyy-mm-dd",todayHighlight:!1,beforeShowDay:function(t){var a=(0,n.default)(t).format("YYYYMM");return"0"==e.getFlagsByMonth(a)[(0,n.default)(t).date()-1]?{classes:"text-gray",tooltip:"没有录像",enabled:!1}:{classes:"text-primary text-bold",tooltip:"有录像"}}}).datepicker("setDate",(0,n.default)(this.day,"YYYYMMDD").toDate()).on("changeDate",function(t){e.$emit("update:day",(0,n.default)(t.date).format("YYYYMMDD"))}),this.update()},watch:{day:function(e){var a=t(this.$el).datepicker("getDate");e!=(0,n.default)(a).format("YYYYMMDD")&&t(this.$el).datepicker("setDate",(0,n.default)(e,"YYYYMMDD").toDate())},id:function(t){this.update()}},computed:{id:function(){return this.serial+"_"+this.code}},methods:{update:function(){this.getFlagMap()},getFlagMap:function(){var e=this;this.serial&&this.code&&t.get("/api/v1/cloudrecord/queryflags",{serial:this.serial,code:this.code,token:this.token}).then(function(a){e.flags=a,t(e.$el).datepicker("update")})},getFlagsByMonth:function(t){return this.flags[t]||this.defaultFlags}}}}).call(e,a("0iPh"))},GB08:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a("F8S1");var i=a("0iPh"),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={props:{size:{type:String,default:""},title:{type:String,default:"选择时间段"},arrow:{type:Boolean,default:!1},format:{type:String,default:"HH:mm:ss"}},data:function(){return{visiable:!1,value:"",vdefault:void 0}},mounted:function(){var t=this;(0,n.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,n.default)(this.$el).on("shown.bs.modal",function(){t.visiable=!0,t.$emit("show")}).on("hidden.bs.modal",function(){t.visiable=!1,t.value="",t.$emit("hide")})},methods:{show:function(){(0,n.default)(this.$el).modal("show")},hide:function(){(0,n.default)(this.$el).modal("hide")},setValue:function(t){this.value=t},setDefault:function(t){this.vdefault=t},doSubmit:function(){this.$emit("submit",this.value)}}}},H8kz:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function i(n,o){try{var r=e[n](o),s=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var o=a("A9K1"),r=i(o),s=a("bsjW"),l=i(s),d=a("0iPh"),u=i(d);e.default={data:function(){return{form:this.defForm()}},components:{FormDlg:r.default,CloudRecordPlan:l.default},methods:{defForm:function(){return{ID:"",Name:"",Enable:!1,Plan:""}},onHide:function(){this.form=this.defForm()},onShow:function(){this.errors.clear(),this.$refs.recordPlan.init(this.form.Plan)},onSubmit:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validateAll();case 2:if(a=e.sent){e.next=8;break}return i=t.errors.items[0],t.$message({type:"error",message:i.msg}),(0,u.default)("[name="+i.field+"]").focus(),e.abrupt("return");case 8:u.default.post("/api/v1/cloudrecord/plan/save",{ID:t.form.ID,Name:t.form.Name,Plan:t.$refs.recordPlan.getplan(),Enable:t.form.Enable}).then(function(e){t.$refs.dlg.hide(),t.$emit("submit")});case 9:case"end":return e.stop()}},e,t)}))()},show:function(t){var e=this;this.errors.clear(),t&&Object.assign(this.form,t),this.$nextTick(function(){e.$refs.dlg.show()})}}}},J08n:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box box-primary videos"},[a("div",{staticClass:"box-header"},[a("h4",{staticClass:"text-primary text-center"},[t._v("云端录像("+t._s(t.name)+")-列表视图")])]),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"btn-group"},["no"!=t.$getQueryString("menu")?a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[a("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\r\n                    ")]):t._e(),t._v(" "),t.videos.length>0&&t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.removeDaily(e)}}},[a("i",{staticClass:"fa fa-remove"}),t._v(" 删除当天\r\n                    ")]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group pull-right"},[a("div",{staticClass:"input-group input-group-sm"},[a("CloudRecordDatePicker",{ref:"datePicker",staticClass:"form-control",attrs:{day:t.day,serial:t.serial,code:t.code},on:{"update:day":t.updateDay}}),t._v(" "),a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.showCloudRecordDatePicker(e)}}},[a("i",{staticClass:"fa fa-calendar"})]),t._v(" "),a("router-link",{staticClass:"btn btn-default btn-sm",attrs:{to:"/cloudrecord/timeview/"+this.serial+"/"+this.code+"/"+this.day,replace:""}},[a("i",{staticClass:"fa fa-hand-o-right"}),t._v(" 时间轴视图\r\n                        ")])],1)],1)])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"clearfix"}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"recordTable",attrs:{"row-class-name":t.tableRowClassName,"element-loading-text":"加载中...",data:t.pageData,"empty-text":"暂无数据, 请另选日期","default-sort":{prop:"startAt",order:"descending"}},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{"min-width":"200",label:"设备国标编号",prop:"serial","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200",label:"通道国标编号",prop:"code","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",label:"通道名称",prop:"name","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"190",label:"操作",fixed:!t.isMobile()&&"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-group"},[a("a",{staticClass:"btn btn-primary btn-xs",attrs:{role:"button"},on:{click:function(a){a.preventDefault(),t.play(e.row)}}},[a("i",{staticClass:"fa fa-play"}),t._v(" 播放\r\n                        ")]),t._v(" "),a("a",{staticClass:"btn btn-info btn-xs",attrs:{role:"button"},on:{click:function(a){a.preventDefault(),t.download(e.row)}}},[a("i",{staticClass:"fa fa-download"}),t._v(" 下载\r\n                        ")]),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?a("a",{staticClass:"btn btn-danger btn-xs",attrs:{role:"button"},on:{click:function(a){a.preventDefault(),t.remove(e.row)}}},[a("i",{staticClass:"fa fa-remove"}),t._v(" 删除\r\n                        ")]):t._e()])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"160",label:"开始时间",prop:"startAt",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",label:"录像时长",prop:"duration",sortable:"custom"}}),t._v(" "),t.hasAnyRole(t.serverInfo,t.userInfo,"管理员")?a("el-table-column",{attrs:{prop:"important",label:"重要标记","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{on:{change:function(a){t.turnImportant(e.row)}},model:{value:e.row.important,callback:function(a){t.$set(e.row,"important",a)},expression:"scope.row.important"}})]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{"min-width":"450",label:"视频地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"ellipsis"},[a("i",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.row.hls,expression:"scope.row.hls"}],staticClass:"fa fa-copy",attrs:{title:"点击拷贝",role:"button"},on:{success:function(e){t.$message({type:"success",message:"成功拷贝到粘贴板"})}}}),t._v(" "),a("a",{staticClass:"text-primary",attrs:{role:"button"},on:{click:function(a){a.preventDefault(),t.play(e.row)}}},[t._v(t._s(e.row.hls))])])]}}])})],1)],1),t._v(" "),t.total>0?a("div",{staticClass:"box-footer clearfix"},[a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}})],1):t._e(),t._v(" "),a("CloudRecordVideoDlg",{ref:"cloudRecordVideoDlg"})],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},KZtG:function(t,e,a){"use strict";function i(t){a("5XEf")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("H8kz"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("/PfP"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-defbcc36",null);e.default=u.exports},Khoi:function(t,e,a){"use strict";(function(t){function a(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{serial:{type:String,default:""},code:{type:String,default:""}},data:function(){var t;return t={days:["一","二","三","四","五","六","日"],checks:[],isclick:!1,recordPlan:"",isDown:!1,divIndex:0,currentDayWidth:0},a(t,"isDown",!1),a(t,"visible",!1),a(t,"currentDuration",null),a(t,"isDownLeft",!1),a(t,"isDownLeft",!1),a(t,"value1",""),a(t,"durations",[]),a(t,"originDurations",[]),a(t,"dayindex",0),a(t,"overIndex",-1),a(t,"durationDatas",[]),a(t,"prex",0),a(t,"durationindex",0),a(t,"startNum",0),a(t,"dstarthh",""),a(t,"dstartmm",""),a(t,"dendhh",""),a(t,"dendmm",""),a(t,"moveprex",0),a(t,"recordPlan",""),a(t,"mouseup",null),a(t,"mousemove",null),a(t,"movePosNum",0),a(t,"nextStartNum",0),t},created:function(){},watch:{},mounted:function(){var t=this;this.mouseup=function(e){t.isDown=!1,t.isDownLeft=!1,t.isDownRight=!1,t.moveprex=0,t.movePosNum=0,t.prex=0,t.nextStartNum=0,t.checkPlanData(!1),t.log("mouse up")},this.mousemove=function(e){if(!t.isDown&&!t.isDownLeft&&!t.isDownRight)return!1;if(t.isDown){var a=t.getPosX(e);t.moveprex=a;var i=Math.floor(a/656*1440/60)+":"+Math.floor(a/656*1440%60),n=t.timeToNum(i);if(n+=30-n%30,n>1440&&(n=1440),n<=t.movePosNum)return;if(t.movePosNum=n,a==t.prex)return;if(a>t.prex){var o=t.numToTime(t.startNum),r=t.numToTime(n),s="s"+(t.dayindex+1),l="e"+(t.dayindex+1);if(t.startNum==n||o==r)return void t.log("right move ignore isDown:"+t.isDown+",prex="+t.prex+",x="+a+"datalenth="+t.durationDatas.length+",durationindex="+t.durationindex+",posNum="+n);if(t.durationindex+1<t.durationDatas.length&&(t.nextStartNum=t.timeToNum(t.durationDatas[t.durationindex+1][s]),n>t.nextStartNum))return void t.log("right move ignore 交界 isDown:"+t.isDown+",prex="+t.prex+"',x="+a+",datalenth="+t.durationDatas.length+",durationindex="+t.durationindex+",posNum="+n+",nextStart="+t.durationDatas[t.durationindex+1]["s"+(t.dayindex+1)]);0!=t.nextStartNum&&n>t.nextStartNum&&(n=t.nextStartNum,t.movePosNum=n,r=t.numToTime(n)),t.durationDatas[t.durationindex][s]=o,t.durationDatas[t.durationindex][l]=r,t.log("right move log isDown:"+t.isDown+",prex="+t.prex+",x="+a+",datalenth="+t.durationDatas.length+",durationindex="+t.durationindex+",posNum="+n),t.$set(t.durations,t.dayindex,t.durationDatas)}}},document.addEventListener("mouseup",this.mouseup),document.addEventListener("mousemove",this.mousemove)},beforeDestroy:function(){document.removeEventListener("mouseup",this.mouseup),document.removeEventListener("mousemove",this.mousemove)},methods:{init:function(t){this.originDurations=[],this.durations=[],this.durations=t?JSON.parse(t):[],this.originDurations=[];for(var e=0;e<7;e++){var a=[];this.durations[e]?a=this.durations[e]:this.durations[e]=a,this.originDurations[e]=a}},isModify:function(){if(0==this.originDurations.length)return!1;for(var t=0;t<this.durations.length;t++)if(this.originDurations[t]!=this.durations[t])return!0;return!1},log:function(t){},durationmove:function(t,e,a){if(this.isDown&&a==this.durationindex&&e==this.dayindex){var i=this.getPosX(t),n=this.timeToNum(Math.floor((this.prex+i)/656*1440/60)+":"+Math.floor((this.prex+i)/656*1440%60));n+=30-n%30,0==i&&(n=this.startNum),n>1440&&(n=1440),this.log("duration move log moveprex="+this.moveprex+",prex="+this.prex+",x="+i+",startNum="+this.startNum+",end_num="+n),n>=this.startNum&&(0!=this.nextStartNum&&n>this.nextStartNum&&(n=this.nextStartNum),this.movePosNum=n,this.durations[e][a]["e"+(e+1)]=this.numToTime(n))}},removeDuration:function(e,a){for(var i=[],n=0;n<this.durations[e].length;n++)n!=a&&i.push(this.durations[e][n]);this.$set(this.durations,e,i),t(".plan-row-header").click()},saveDuration:function(e,a){1==this.dstarthh.length&&(this.dstarthh="0"+this.dstarthh),1==this.dstartmm.length&&(this.dstartmm="0"+this.dstartmm),1==this.dendhh.length&&(this.dendhh="0"+this.dendhh),1==this.dendmm.length&&(this.dendmm="0"+this.dendmm);for(var i=this.dstarthh+":"+this.dstartmm,n=this.dendhh+":"+this.dendmm,o=[],r=this.durations[e].length,s=0;s<r;s++)if(s==a){if(this.timeToNum(i)>this.timeToNum(n))return void this.$message({type:"warning",message:"结束时间不能小于开始时间"});if(this.timeToNum(n)>1440)return void this.$message({type:"warning",message:"结束时间不能大于24点"});if(this.timeToNum(i)<0)return void this.$message({type:"warning",message:"开始时间不能小于0点"});if(s>0){var l=this.durations[e][s-1];if(this.timeToNum(i)<this.timeToNum(l["e"+(e+1)]))return void this.$message({type:"warning",message:"开始时间须大于上一段结束时间"})}if(s+1<r){var l=this.durations[e][s+1];if(this.timeToNum(n)>this.timeToNum(l["s"+(e+1)]))return void this.$message({type:"warning",message:"结束时间须小于下一段开始时间"})}var d={};d["s"+(e+1)]=i,d["e"+(e+1)]=n,o.push(d)}else o.push(this.durations[e][s]);this.$set(this.durations,e,o),t(".plan-row-header").click()},durationClick:function(t,e,a){this.dstarthh=e["s"+(a+1)].split(":")[0],this.dstartmm=e["s"+(a+1)].split(":")[1],this.dendhh=e["e"+(a+1)].split(":")[0],this.dendmm=e["e"+(a+1)].split(":")[1],t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},dayClick:function(e){if(7!=this.durations.length)return void this.$message({type:"warning",message:"获取录像计划中,请稍后..."});this.isDown=!0;var a=this.getPosX(e);this.prex=a,this.dayindex=parseInt(t(e.currentTarget).attr("index"));var i=[],n=Math.floor(a/656*1440/60)+":"+Math.floor(a/656*1440%60),o=this.timeToNum(n);this.startNum=o%30>15?o+(30-o%30):o-o%30;var r={};r["s"+(this.dayindex+1)]=this.numToTime(this.startNum),r["e"+(this.dayindex+1)]=this.numToTime(this.startNum);for(var s=!1,l=0;l<this.durations[this.dayindex].length;l++){var d=this.durations[this.dayindex][l];this.startNum<this.timeToNum(d["s"+(this.dayindex+1)])&&!s&&(s=!0,this.durationindex=l,i.push(r)),i.push(d)}0!=i.length&&s||(i.push(r),this.durationindex=i.length-1),this.durationDatas=i,this.log("day click log x="+a+",dayindex="+this.dayindex+",predatalength="+(this.durations[this.dayindex]||[]).length+",time="+r["s"+(this.dayindex+1)]+"dataarr="+this.durations[this.dayindex])},getPosX:function(t){var e,t=t||window.event;return t.offsetX||t.offsetY?(e=t.offsetX,t.offsetY):(t.layerX||t.layerY)&&(e=t.layerX,t.layerY),e=parseInt(e),e<0?e=0:e>656&&(e=656),e},timeToNum:function(t){var e=t.split(":");return 60*parseInt(e[0])+parseInt(e[1])},numToTime:function(t){return(Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60))+":"+(t%60<10?"0"+t%60:t%60)},durationLeft:function(t,e,a){for(var i=0,n=0;n<a;n++)i+=this.durationWidth(this.durations[e][n],e);return i<0&&(i=0),this.timeToNum(t["s"+(e+1)])/1440*100-i},durationWidth:function(t,e){return(this.timeToNum(t["e"+(e+1)])-this.timeToNum(t["s"+(e+1)]))/1440*100},refresh:function(){var t=this;this.$confirm("恢复初始配置，当前的编辑会丢失，是否继续?","提示").then(function(){t.reset()}).catch(function(){})},getChecks:function(){return this.checks.join("")},reset:function(){for(var t=0;t<7;t++){var e=this.originDurations[t]||[];this.$set(this.durations,t,e)}},checkPlanData:function(t){for(var e=[],a=0;a<7;a++){var i=[];if(this.durations[a])for(var n=0;n<this.durations[a].length;n++){var o="s"+(a+1),r="e"+(a+1),s=this.timeToNum(this.durations[a][n][o]);if(!(s<0||s>1440)){var l=this.timeToNum(this.durations[a][n][r]);if(!(l<0||l>1440||s>=l)){var d={};if(i.length>0){var u=i[i.length-1],c=this.timeToNum(u[r]);if(s<c&&(s=c),t&&s==c){i[i.length-1][r]=this.numToTime(l);continue}}d[o]=this.numToTime(s),d[r]=this.numToTime(l),i.push(d)}}}e.push(i)}this.durations=e},getplan:function(){return this.checkPlanData(!0),JSON.stringify(this.durations)},selectall:function(){for(var t=0;t<7;t++){var e=[],a={};a["s"+(t+1)]="00:00",a["e"+(t+1)]="24:00",e.push(a),this.$set(this.durations,t,e)}},unselectall:function(){for(var t=0;t<7;t++){var e=[];this.$set(this.durations,t,e)}}}}}).call(e,a("0iPh"))},LbQQ:function(t,e,a){var i=a("rF1v");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("080cae9a",i,!0,{})},Lfx6:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".model-lg[data-v-defbcc36]{width:80%!important}#name[data-v-defbcc36]{max-width:800px}",""])},MTHH:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=a("PJh5"),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){return{timeCursorX:0,timeDayX:0,bMoving:!1}},props:{minutesPerUnit:{default:5,type:Number},videos:{default:function(){return[]}},start:{default:0,type:Number},end:{default:0,type:Number}},mounted:function(){function e(e){var a=t(o).data("originPageX"),i=e.pageX-a;s.timeCursorX=t(o).position().left+i,t(o).data("originPageX",e.pageX)}function a(e){var a=e.originalEvent.targetTouches[0],i=t(o).data("originPageX"),n=a.pageX-i;s.timeCursorX=t(o).position().left+n,t(o).data("originPageX",a.pageX)}function i(e){var a=t(r).data("originPageX"),i=e.pageX-a;s.timeDayX=t(r).position().left+i,t(r).data("originPageX",e.pageX)}function n(e){var a=e.originalEvent.targetTouches[0],i=t(r).data("originPageX"),n=a.pageX-i;s.timeDayX=t(r).position().left+n,t(r).data("originPageX",a.pageX)}var o=this.$refs.cursor,r=this.$refs.day,s=(this.$el,this);t(o).on("mousedown",function(a){t(o).data("originPageX",a.pageX),s.bMoving=!0,t(document).on("mousemove",e).one("mouseup",function(a){t(document).off("mousemove",e),t(o).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})}).on("touchstart",function(e){var i=e.originalEvent.targetTouches[0];t(o).data("originPageX",i.pageX),s.bMoving=!0,t(document).on("touchmove",a).one("touchend",function(e){t(document).off("touchmove",a),t(o).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})}),t(r).on("mousedown",function(e){t(r).data("originPageX",e.pageX),s.bMoving=!0,t(document).on("mousemove",i).one("mouseup",function(e){t(document).off("mousemove",i),t(r).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})}).on("touchstart",function(e){var a=e.originalEvent.targetTouches[0];t(r).data("originPageX",a.pageX),s.bMoving=!0,t(document).on("touchmove",n).one("touchend",function(e){t(document).off("touchmove",n),t(r).removeData("originPageX"),s.triggerTimeChange(),s.bMoving=!1})})},watch:{videos:function(t){this.triggerTimeChange()}},methods:{hourText:function(t){return(0,n.default)().hour(t).minute(0).second(0).format("HH:mm")},minuteActiveClass:function(t){var e=(0,n.default)().hour(0).minute(t),a=e.format("HH:mm");return Object.keys(this.activeMinutes).indexOf(a)>=0?"active":""},minuteTitle:function(t){var e=(0,n.default)().hour(0).minute(t),a=e.format("HH:mm");return Object.keys(this.activeMinutes).indexOf(a)>=0?a:""},clickMinute:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.bMoving||(this.timeCursorX=t+this.timeDayX,e&&this.triggerTimeChange())},triggerTimeChange:function(){this.$emit("timeChange",this.activeMinutes[this.timeCursorText])}},computed:{timeCursorText:function(){this.timeCursorX>=t(this.$el).innerWidth()&&(this.timeCursorX=t(this.$el).innerWidth()-1),this.timeCursorX<0&&(this.timeCursorX=0),this.timeDayX<t(this.$el).innerWidth()-t(this.$refs.day).outerWidth()&&(this.timeDayX=t(this.$el).innerWidth()-t(this.$refs.day).outerWidth()),this.timeDayX>0&&(this.timeDayX=0),this.timeCursorX-this.timeDayX>=1440&&(this.timeDayX=t(this.$el).innerWidth()-t(this.$refs.day).outerWidth(),this.timeCursorX=t(this.$el).innerWidth()-1);var e=parseInt((this.timeCursorX-this.timeDayX)/this.minutesPerUnit)*this.minutesPerUnit;return(0,n.default)().hour(0).minute(e).format("HH:mm")},activeMinutes:function(){var t={},e=!0,a=!1,i=void 0;try{for(var o,r=this.videos[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value,l=(0,n.default)(s.startAt,"YYYYMMDDHHmmss"),d=(0,n.default)(s.startAt,"YYYYMMDDHHmmss"),u=parseInt(s.duration);if(!(u<=0||u>36e3)){var c=d.unix();c-=c%(60*this.minutesPerUnit);var f=n.default.unix(c);if(l.isSame(f,"day")){var h=f.format("HH:mm"),m=void 0,v=void 0;this.start&&(m=(0,n.default)(l).startOf("day").add(this.start,"minute")),this.end&&(v=(0,n.default)(l).startOf("day").add(this.end,"minute")),t[h]=Object.assign({currentTime:0},s),m&&d.isBefore(m,"minute")&&delete t[h],v&&d.isAfter(v,"minute")&&delete t[h];for(var p=1;p<=u;p++)if(d.add(1,"seconds"),!m||!d.isBefore(m,"minute")){if(v&&d.isAfter(v,"minute"))break;if(c=d.unix(),c-=c%(60*this.minutesPerUnit),f=n.default.unix(c),l.isSame(f,"day")){var g=f.format("HH:mm");g!=h&&(h=g,t[h]=Object.assign({currentTime:p},s))}}}}}}catch(t){a=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw i}}return t}}}}).call(e,a("0iPh"))},MiTi:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".opt-group .cell{overflow:visible}",""])},NL8R:function(t,e,a){"use strict";function i(t){a("u6wr")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("RYQK"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("mmha"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-03710e08",null);e.default=u.exports},QWek:function(t,e,a){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=a("NYxO"),r=a("PJh5"),s=i(r),l=a("TodO"),d=i(l),u=a("0tm0"),c=i(u),f=a("M4fF"),h=i(f);e.default={props:{serial:"",code:"",day:""},data:function(){return{name:"",currentPage:1,pageSize:10,sort:"startAt",order:"ascending",loading:!1,videos:[],bgcolor:"",pathname:"/"==location.pathname?"":location.pathname.substring(0,location.pathname.length-1)}},components:{CloudRecordDatePicker:c.default,CloudRecordVideoDlg:d.default},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;if(e.important)return"warning-row"},isMobile:function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},updateDay:function(t){this.$router.replace("/cloudrecord/listview/"+this.serial+"/"+this.code+"/"+t)},showCloudRecordDatePicker:function(){t(this.$refs.datePicker.$el).focus()},updateVideos:function(){var e=this;this.loading=!0,t.get("/api/v1/cloudrecord/querydaily",{serial:this.serial,code:this.code,period:this.day,sort:this.sort,order:this.order}).then(function(t){e.name=t.name||e.serial+":"+e.code,e.osd=t.osd||"",e.videos=t.list}).always(function(){e.$nextTick(function(){e.loading=!1})})},updateVideosDebounce:h.default.debounce(function(){this.updateVideos()},800),play:function(t){this.$refs.cloudRecordVideoDlg.play(t.hls,this.name+"("+t.startAt+")",t.Snap||"",this.osd)},download:function(t){window.open("/api/v1/cloudrecord/download/"+this.serial+"/"+this.code+"/"+t._startAt)},removeDaily:function(){var e=this;this.$confirm("确认删除 "+this.name+" "+(0,s.default)(this.day).format("YYYY-MM-DD")+" 当天所有录像?","提示").then(function(){t.get("/api/v1/cloudrecord/removedaily",{serial:e.serial,code:e.code,period:e.day}).always(function(){e.updateVideos(),e.$refs.datePicker.update()})}).catch(function(){})},remove:function(e){var a=this;this.$confirm("确认删除 "+e.name+" ?","提示").then(function(){t.get("/api/v1/cloudrecord/remove",{serial:a.serial,code:a.code,period:e._startAt}).always(function(){a.updateVideos()})}).catch(function(){})},sortChange:function(t){this.sort=t.prop,this.order=t.order,this.updateVideos()},turnImportant:function(e){var a=this;t.get("/api/v1/cloudrecord/setimportant",{serial:e.serial,code:e.code,period:e._startAt,important:e.important}).then(function(){var t=e.important?"标记成功,将不会被自动清理":"取消标记成功";a.$message({type:"success",message:t})}).fail(function(){a.$set(e,"important",!e.important)})}},mounted:function(){return this.serial&&this.code?this.day?void 0:void this.$router.replace("/cloudrecord/"+this.serial+"/"+this.code+"/"+(0,s.default)().format("YYYYMMDD")):void this.$router.replace("/cloudrecord")},computed:n({},(0,o.mapState)(["serverInfo","userInfo"]),{total:function(){return this.videos.length},pageData:function(){var t=this,e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.videos.slice(e,a).map(function(e){return e.serial||(e.serial=t.serial,e.code=t.code,e.name=t.name,e.location=location,e._startAt=e.startAt,e.startAt=(0,s.default)(e.startAt,"YYYYMMDDHHmmss").format("YYYY-MM-DD HH:mm:ss"),e.duration=s.default.utc(1e3*(e.duration||0)).format("HH:mm:ss")),e})}}),beforeRouteUpdate:function(t,e,a){var i=this;return t.params.serial&&t.params.code?t.params.day?(a(),void this.$nextTick(function(){i.loading||e.path==t.path||i.updateVideos()})):void this.$router.replace("/cloudrecord/"+t.params.serial+"/"+t.params.code+"/"+(0,s.default)().format("YYYYMMDD")):void this.$router.replace("/cloudrecord")}}}).call(e,a("0iPh"))},RYQK:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};a("F8S1");var o=a("0iPh"),r=i(o),s=a("M4fF"),l=i(s),d=a("NYxO");e.default={props:{title:{default:""},size:{type:String,default:"modal-lgg"},fade:{type:Boolean,default:!1}},data:function(){return{q:"",online:"",total:0,relateCnt:0,pageSize:10,currentPage:1,sort:"",order:"",related:!1,reverse:!1,loading:!1,channels:[],selection:[],id:""}},watch:{q:function(t,e){this.doDelaySearch()},online:function(t,e){this.doSearch()},related:function(t,e){this.doSearch()},reverse:function(t,e){this.doSearch()},currentPage:function(t,e){this.doSearch(t)},pageSize:function(t,e){this.doSearch()}},computed:n({},(0,d.mapState)(["userInfo","serverInfo"])),mounted:function(){var t=this;(0,r.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,r.default)(this.$el).on("shown.bs.modal",function(){t.$emit("show")}).on("hidden.bs.modal",function(){t.errors.clear(),t.reset(),t.$emit("hide")})},directives:{focus:{inserted:function(t){t.focus(),t.select()}}},methods:{sortChange:function(t){this.sort=t.prop,this.order="ascending"==t.order?"asc":"desc",this.getChannels()},select:function(t,e){var a=this;t.indexOf(e)>=0?r.default.get("/api/v1/cloudrecord/plan/savechannels",{id:this.id,channels:[e.DeviceID+":"+e.ID]}).always(function(){a.getChannels()}):r.default.get("/api/v1/cloudrecord/plan/removechannels",{id:this.id,channels:[e.DeviceID+":"+e.ID]}).always(function(){a.getChannels()})},selectAll:function(t){var e=this,a=[];if(t.length){var i=!0,n=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value;this.selection.indexOf(d)<0&&a.push(d.DeviceID+":"+d.ID)}}catch(t){n=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw o}}r.default.get("/api/v1/cloudrecord/plan/savechannels",{id:this.id,channels:a}).always(function(){e.getChannels()})}else{var u=!0,c=!1,f=void 0;try{for(var h,m=this.selection[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var d=h.value;a.push(d.DeviceID+":"+d.ID)}}catch(t){c=!0,f=t}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}r.default.get("/api/v1/cloudrecord/plan/removechannels",{id:this.id,channels:a}).always(function(){e.getChannels()})}},doSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t,this.getChannels()},doDelaySearch:l.default.debounce(function(){this.doSearch()},800),formatName:function(t,e,a){var i=t.DeviceCustomName||t.DeviceName||"",n=t.CustomName||t.Name||"";return i&&i!=n&&(n=n?n+"@"+i:i),n||"-"},formatDeviceName:function(t,e,a){return t.DeviceCustomName||t.DeviceName||"-"},formatChannelName:function(t,e,a){return t.CustomName||t.Name||"-"},formatManufacturer:function(t,e,a){return a||"-"},selectable:function(t,e){return!0},getChannels:function(){var t=this;this.id&&(this.loading=!0,r.default.get("/api/v1/cloudrecord/plan/channellist",{id:this.id,q:this.q,online:this.online,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,related:this.related,reverse:this.reverse,sort:this.sort,order:this.order}).then(function(e){t.$refs.channelTable.clearSelection(),t.total=e.ChannelCount,t.relateCnt=e.ChannelRelateCount,t.channels=e.ChannelList||[],t.selection=[],t.$nextTick(function(){t.channels.forEach(function(e){var a=""!=e.PlanID;t.$refs.channelTable.toggleRowSelection(e,a),a&&t.selection.push(e)})})}).always(function(){t.$nextTick(function(){t.loading=!1})}))},isDir:function(t){if(t){if(t.SubCount>0)return!0;if(this.serverInfo.StrictChannelParental&&1==t.Parental)return!0;if(this.serverInfo.StrictChannelCode&&t.ID.length<=10)return!0;if(1==t.Parental&&"LiveQing"==t.Manufacturer)return!0;if(20==t.ID.length&&("216"==t.ID.substring(10,13)||"215"==t.ID.substring(10,13)))return!0}return!1},reset:function(){this.id="",this.$refs.channelTable.clearSelection(),this.channels=[],this.selection=[],this.q="",this.online="",this.related=!1,this.reverse=!1,this.total=0,this.relateCnt=0,this.currentPage=1,this.pageSize=10},show:function(t){this.id=t,(0,r.default)(this.$el).modal("show"),this.getChannels()},hide:function(){(0,r.default)(this.$el).modal("hide")},toggleReverse:function(){this.reverse=!this.reverse}}}},S4Bz:function(t,e,a){"use strict";function i(t){a("dsQw")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("GB08"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("sLEc"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-1b5900bd",null);e.default=u.exports},TFIr:function(t,e,a){"use strict";function i(t){a("vl4P")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("MTHH"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("BKf4"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-bbde64c4",null);e.default=u.exports},TodO:function(t,e,a){"use strict";function i(t){a("yqJT")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("23ZA"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("//kK"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-3725ee4b",null);e.default=u.exports},VUiS:function(t,e,a){var i=a("MiTi");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("530fe140",i,!0,{})},"Z/xU":function(t,e,a){"use strict";function i(t){a("VUiS")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("21+a"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("4460"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,null,null);e.default=u.exports},ZiOd:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".datepicker{z-index:9999!important}",""])},bsjW:function(t,e,a){"use strict";function i(t){a("05st")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("Khoi"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("B92P"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,"data-v-a298d878",null);e.default=u.exports},dsQw:function(t,e,a){var i=a("ha9Q");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("5a40dd55",i,!0,{})},fUsA:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".modal-content[data-v-03710e08]{overflow:hidden}@media screen and (min-width:992px){.modal-dialog.modal-lgg[data-v-03710e08]{width:90%}}@media screen and (min-width:1200px){.modal-dialog.modal-lgg[data-v-03710e08]{width:1200px}}",""])},hTLv:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box box-primary records"},[a("div",{staticClass:"box-header"},[a("h4",{staticClass:"text-primary text-center"},[t._v("云端录像("+t._s(t.name)+")-时间轴视图")])]),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group"},["no"!=t.$getQueryString("menu")?a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[a("i",{staticClass:"fa fa-chevron-left"}),t._v(" 返回\r\n                ")]):t._e(),t._v(" "),t.shareURL?a("span",[t._v("  ")]):t._e(),t._v(" "),t.shareURL?a("a",{staticClass:"btn btn-default btn-sm",attrs:{role:"button",href:t.shareURL,target:"_blank"}},[a("i",{staticClass:"fa fa-share"}),t._v(" 分享页\r\n                ")]):t._e(),t._v(" "),!t.isDemoUser(t.serverInfo,t.userInfo)&&t.videos.length>0?a("span",[t._v("  ")]):t._e(),t._v(" "),!t.isDemoUser(t.serverInfo,t.userInfo)&&t.videos.length>0?a("button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.bDownloading,expression:"bDownloading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btn btn-default btn-sm",attrs:{type:"button","element-loading-text":"合成中..."},on:{click:function(e){e.preventDefault(),t.showTimeRangeDlg(e)}}},[a("i",{staticClass:"fa fa-download"}),t._v(" 下载\r\n                ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group pull-right"},[a("div",{staticClass:"input-group input-group-sm"},[a("CloudRecordDatePicker",{ref:"datePicker",staticClass:"form-control",attrs:{day:t.day,serial:t.serial,code:t.code},on:{"update:day":t.updateDay}}),t._v(" "),a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.showCloudRecordDatePicker(e)}}},[a("i",{staticClass:"fa fa-calendar"})]),t._v(" "),a("router-link",{staticClass:"btn btn-default btn-sm",attrs:{to:"/cloudrecord/listview/"+this.serial+"/"+this.code+"/"+this.day,replace:""}},[a("i",{staticClass:"fa fa-hand-o-right"}),t._v(" 列表视图\r\n                        ")])],1)],1)])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"clearfix"}),t._v(" "),a("LivePlayer",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{videoUrl:t.videoUrl,waterMark:t.osd,muted:"",hideBigPlayButton:!!t.serverInfo.HideBigPlayButton,currentTime:t.currentTime,loading:t.loading,"element-loading-text":"加载中...","element-loading-background":"#000"},on:{media_info:t.onMediaInfo,error:t.onVideoError,ended:t.onVideoEnd,timeupdate:t.onVideoTimeUpdate,"update:loading":function(e){t.loading=e}}}),t._v(" "),t.isDemoUser(t.serverInfo,t.userInfo)&&!t.bOutHevcTip?a("div",{staticClass:"text-center"},[a("br"),t._v("\r\n            提示: 演示系统限制匿名登录播放时间, 若需测试长时间播放, 请"),a("a",{attrs:{target:"_blank",href:"//www.liveqing.com/docs/download/LiveGBS.html"}},[t._v("下载使用")])]):t._e(),t._v(" "),t.bOutHevcTip?a("div",{staticClass:"text-center text-red"},[a("br"),t._v("\r\n            提示: 正在播放 H265 直出流, 确保浏览器版本较新, 并且开启硬件加速\r\n        ")]):t._e(),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("CloudRecordTimeRule",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingRecords,expression:"loadingRecords"}],ref:"timeRule",attrs:{videos:t.videos,minutesPerUnit:t.serverInfo.MinutesPerUnit||5},on:{timeChange:t.onTimeChange}}),t._v(" "),a("br")],1),t._v(" "),a("TimeRangeDlg",{ref:"timeRangeDlg",attrs:{format:"HHmmss"},on:{submit:t.onTimeRangeChange}})],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},ha9Q:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".modal-content[data-v-1b5900bd]{overflow:hidden}@media screen and (min-width:992px){.modal-dialog.modal-lgg[data-v-1b5900bd]{width:90%}}@media screen and (min-width:1200px){.modal-dialog.modal-lgg[data-v-1b5900bd]{width:1200px}}@media screen and (max-width:767px){.el-date-editor--daterange.el-input[data-v-1b5900bd],.el-date-editor--daterange.el-input__inner[data-v-1b5900bd],.el-date-editor--timerange.el-input[data-v-1b5900bd],.el-date-editor--timerange.el-input__inner[data-v-1b5900bd]{width:250px}}",""])},jMU5:function(t,e,a){var i=a("qKLr");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("d95383aa",i,!0,{})},kTKo:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".time-rule[data-v-bbde64c4]{overflow:hidden;position:relative;height:50px;margin:0 auto;width:100%;font-size:12px;max-width:1440px;background-color:#ccc}.time-day[data-v-bbde64c4]{position:absolute;left:0;top:0;height:100%;width:1440px;cursor:pointer;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.time-minute[data-v-bbde64c4]{float:left;height:8px;margin:0;cursor:default}.time-minute.active[data-v-bbde64c4]{background-color:#404d59;cursor:pointer}.time-text-first[data-v-bbde64c4],.time-text[data-v-bbde64c4]{float:left;width:60px;border-left:1px solid #999;border-top:1px solid #999;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;text-align:center;height:25px;line-height:25px}.time-text-first[data-v-bbde64c4]{border-left:0}.time-cursor[data-v-bbde64c4]{position:absolute;left:0;top:0;height:30px;width:2px;background-color:red;text-align:center}.time-cursor-text[data-v-bbde64c4]{position:absolute;padding:0 5px;width:60px;left:-30px;top:30px;border:1px solid red;height:15px;line-height:15px;cursor:move;background-color:#fff;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}",""])},l8IP:function(t,e,a){"use strict";function i(t){a("jMU5")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("QWek"),o=a.n(n);for(var r in n)["default","default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a("J08n"),l=a("VU/8"),d=i,u=l(o.a,s.a,!1,d,null,null);e.default=u.exports},lGU5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade upload-dlg",attrs:{"data-backdrop":"static","data-keyboard":"true",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),a("h4",{staticClass:"modal-title text-center text-info"},[a("span",[t._v(t._s(t.title))])])]),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("header"),t._v(" "),a("el-upload",{ref:"uploader",attrs:{drag:t.drag,action:t.url,multiple:t.multiple,"show-file-list":t.showFileList,limit:1,"on-success":t.onSuccess,"on-progress":t.onProgress,"on-error":t.onError,"on-remove":t.onRemove,accept:t.accept,"before-upload":t.beforeUpload,"auto-upload":t.autoUpload}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将配置数据拖到此处，或 "),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tip)),a("span",{staticStyle:{color:"red"}},[t._v(" *上传成功会自动删除原有数据，请注意导出备份*")])])]),t._v(" "),t._t("footer")],2),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal",disabled:t.bProgress}},[t._v("关闭")])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:i,staticRenderFns:n};e.a=o},lNNb:function(t,e,a){var i=a("zp8H");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("254e2c66",i,!0,{})},"mfN/":function(t,e,a){var i=a("ZiOd");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("736ac1e2",i,!0,{})},mmha:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["modal",{fade:t.fade}],attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[a("div",{class:["modal-dialog",t.size]},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),a("h4",{staticClass:"modal-title text-center text-primary"},[a("span",[t._v(t._s(t.title))])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-inline",attrs:{autocomplete:"off",spellcheck:"false"}},[a("div",{staticClass:"form-group form-group-sm"},[a("label",[t._v("搜索")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],ref:"q",staticClass:"form-control",attrs:{type:"text",placeholder:"关键字"},domProps:{value:t.q},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.q=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("label",[t._v("在线状态")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.online,expression:"online",modifiers:{trim:!0}}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.online=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),a("option",{attrs:{value:"true"}},[t._v("在线")]),t._v(" "),a("option",{attrs:{value:"false"}},[t._v("离线")])])]),t._v(" "),a("span",{staticClass:"hidden-xs"},[t._v("  ")]),t._v(" "),a("div",{staticClass:"form-group form-group-sm"},[a("div",{staticClass:"checkbox",staticStyle:{"user-select":"none"}},[a("el-checkbox",{staticStyle:{"margin-top":"-5px","padding-left":"0"},attrs:{size:"small",name:"Related"},model:{value:t.related,callback:function(e){t.related="string"==typeof e?e.trim():e},expression:"related"}},[t._v("\r\n                                只看"+t._s(t.reverse?"未选":"已选")+"("+t._s(t.relateCnt)+")\r\n                            ")]),t._v(" "),a("span",[a("a",{attrs:{role:"button"},on:{click:t.toggleReverse}},[a("i",{staticClass:"fa fa-sort"})])])],1)])]),t._v(" "),a("br"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"channelTable",attrs:{data:t.channels,stripe:"","max-height":500,"element-loading-text":"加载中..."},on:{"sort-change":t.sortChange,select:t.select,"select-all":t.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",selectable:t.selectable}}),t._v(" "),a("el-table-column",{attrs:{prop:"DeviceID",label:"设备国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ID",label:"通道国标编号","min-width":"200","show-overflow-tooltip":"",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",label:"通道名称","min-width":"160",formatter:t.formatName,"show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100",label:"快照"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isDir(e.row)?a("span",[a("i",{staticClass:"fa fa-sitemap"})]):a("el-popover",{attrs:{"open-delay":1e3,"close-delay":10,placement:"left",title:e.row.ID,width:"400",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{onerror:"this.src='/images/default_snap.png';",src:e.row.SnapURL}}),t._v(" "),a("img",{staticStyle:{height:"30px",width:"50px"},attrs:{slot:"reference",onerror:"this.src='/images/default_snap.png';",src:e.row.SnapURL},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Status",label:"在线状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isDir(e.row)?a("span",[t._v("-")]):e.row.DeviceOnline&&"ON"==(e.row.CustomStatus||e.row.Status)?a("span",{class:{"text-success":"ON"==e.row.Status,"text-orange":!!e.row.CustomStatus}},[t._v("在线")]):a("span",{class:{"text-orange":!!e.row.CustomStatus}},[t._v("离线")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"Manufacturer",label:"厂家","min-width":"120",formatter:t.formatManufacturer,"show-overflow-tooltip":""}})],1),t._v(" "),t.total>0?a("el-pagination",{staticClass:"pull-right",attrs:{layout:"total,prev,pager,next,sizes","pager-count":t.isMobile()?3:5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e}}}):t._e(),t._v(" "),a("div",{staticClass:"clearfix"})],1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:i,staticRenderFns:n};e.a=o},qKLr:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.el-table .warning-row {\r\n    background: oldlace;\r\n    color: red;\n}\n.el-table .success-row {\r\n    background: #f0f9eb;\n}\r\n",""])},qb8i:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a("F8S1");var i=a("0iPh"),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={props:{title:{default:"上传"},url:{type:String,default:""},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},showFileList:{type:Boolean,default:!0},accept:{default:".xlsx"},tip:{default:"仅限上传.xlsx"},limit:{type:Number,default:0},autoUpload:{type:Boolean,default:!0}},data:function(){return{bShow:!1,bProgress:!1}},mounted:function(){var t=this;(0,n.default)(this.$el).find(".modal-content").draggable({handle:".modal-header",cancel:".modal-title span",addClasses:!1,containment:"document",delay:100,opacity:.5}),(0,n.default)(this.$el).on("shown.bs.modal",function(){t.$emit("show"),t.bShow=!0}).on("hidden.bs.modal",function(){t.$emit("hide"),t.bShow=!1,t.$refs.uploader.clearFiles()}).on("hide.bs.modal",function(){if(t.bProgress)return t.$message({type:"error",message:"正在上传, 请稍后..."}),!1})},methods:{show:function(){(0,n.default)(this.$el).modal("show")},hide:function(){(0,n.default)(this.$el).modal("hide")},beforeUpload:function(t){return!(this.limit&&t.size>this.limit)||(this.$message({type:"error",message:"文件["+t.name+"]大小超过限制["+this.limit+"], 不能上传!"}),!1)},onSuccess:function(t,e,a){var i=!0,n=!1,o=void 0;try{for(var r,s=a[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}this.bProgress=!1,this.$emit("uploaded",e)},onProgress:function(t,e,a){this.bProgress=!0},onError:function(t,e,a){t&&this.$message({type:"error",message:t+""});var i=!0,n=!1,o=void 0;try{for(var r,s=a[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;if(100!=l.percentage&&0!==l.percentage)return void(this.bProgress=!0)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}this.bProgress=!1},onRemove:function(t,e){var a=!0,i=!1,n=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var s=o.value;if(100!=s.percentage&&0!==s.percentage)return void(this.bProgress=!0)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}this.bProgress=!1}}}},rF1v:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".upload-dlg .modal-dialog .modal-body{overflow:hidden}.upload-dlg .modal-dialog .modal-body .el-upload{display:block}.upload-dlg .modal-dialog .modal-body .el-upload .el-upload-dragger{margin:0 auto}",""])},sLEc:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"dlg",staticClass:"modal",attrs:{"data-backdrop":"static","data-disable":"false","data-keyboard":"true",tabindex:"-1"}},[a("div",{class:["modal-dialog",t.size]},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),a("h4",{staticClass:"modal-title text-center text-primary"},[a("span",[t._v(t._s(t.title))])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"text-center"},[t.visiable?a("el-time-picker",{attrs:{"is-range":"","arrow-control":t.arrow,"value-format":t.format,"default-value":t.vdefault,"start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"modal-footer"},[t._t("footer"),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.value},on:{click:function(e){e.preventDefault(),t.doSubmit(e)}}},[t._v("确定")])],2)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],o={render:i,staticRenderFns:n};e.a=o},sYwa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4LM/"),n=a.n(i);for(var o in i)["default","default"].indexOf(o)<0&&function(t){a.d(e,t,function(){return i[t]})}(o);var r=a("1Now"),s=a("VU/8"),l=s(n.a,r.a,!1,null,null,null);e.default=l.exports},u6wr:function(t,e,a){var i=a("fUsA");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("63a2567c",i,!0,{})},vl4P:function(t,e,a){var i=a("kTKo");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("2834e158",i,!0,{})},yqJT:function(t,e,a){var i=a("BHkh");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3f65e5bd",i,!0,{})},zp8H:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".player-wrapper[data-v-047692ab]{margin:0 auto;max-width:700px}@media screen and (min-width:1600px){.player-wrapper[data-v-047692ab]{max-width:50%}}",""])}});